{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\espar\\\\Documents\\\\Programming\\\\coffeeshop\\\\src\\\\contexts\\\\products-context.js\",\n  _s = $RefreshSig$();\nimport { cleanup } from \"@testing-library/react\";\nimport { Children, createContext, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [carItems, SetCarItems] = useState(() => {\n    try {\n      const productsInLocalStorage = localStorage.getItem('cartProducts');\n      return productsInLocalStorage ? JSON.parse(productsInLocalStorage) : [];\n    } catch (error) {\n      return [];\n    }\n  });\n  useEffect(() => {\n    localStorage.setItem('cartProducts', JSON.stringify(carItems));\n  }, [carItems]);\n  const addItemToCart = product => {\n    const inCart = carItems.find(productInCart => productInCart.id === product.id);\n    if (inCart) {\n      setCartItems(carItems.map(productInCart => {\n        if (productInCart.id === product.id) {\n          return {\n            ...inCart,\n            amount: inCart.amount + 1\n          };\n        } else return productInCart;\n      }));\n    } else {\n      setCartItems([...carItems, {\n        ...product,\n        amount: 1\n      }]);\n    }\n  };\n  const deleteItemToCart = product => {\n    const inCart = carItems.find(productInCart => productInCart.id === product.id);\n    if (inCart.amount === 1) {\n      setCartItems(carItems.filter(productInCart => productInCart.id !== product.id));\n    } else {\n      setCartItems(productInCart => {\n        if (productInCart.id === product.id) {\n          return {\n            ...inCart,\n            amount: inCart.amount - 1\n          };\n        } else return productInCart;\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      carItems,\n      addItemToCart,\n      deleteItemToCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 13\n  }, this);\n};\n_s(CartProvider, \"d3W4Qde6sd8U1B+rZprhHxEgzgk=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["cleanup","Children","createContext","useEffect","useState","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","carItems","SetCarItems","productsInLocalStorage","localStorage","getItem","JSON","parse","error","setItem","stringify","addItemToCart","product","inCart","find","productInCart","id","setCartItems","map","amount","deleteItemToCart","filter","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/espar/Documents/Programming/coffeeshop/src/contexts/products-context.js"],"sourcesContent":["import { cleanup } from \"@testing-library/react\";\r\nimport { Children, createContext, useEffect, useState } from \"react\";\r\n\r\nconst CartContext = createContext()\r\n\r\nexport const CartProvider = ({children}) => {\r\n    const [carItems, SetCarItems] = useState(() => {\r\n        try{\r\n            const productsInLocalStorage = localStorage.getItem('cartProducts');\r\n            return productsInLocalStorage ? JSON.parse(productsInLocalStorage) : [];\r\n        }catch(error){\r\n            return [];\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('cartProducts', JSON.stringify(carItems));\r\n    }, [carItems]);\r\n\r\n    const addItemToCart = (product) => {\r\n        const inCart = carItems.find((productInCart) => productInCart.id === product.id);\r\n\r\n        if(inCart){\r\n            setCartItems(\r\n                carItems.map((productInCart) => {\r\n                    if(productInCart.id === product.id){\r\n                        return{...inCart, amount: inCart.amount + 1}\r\n                    }else return productInCart\r\n                })\r\n            );   \r\n        } else{\r\n            setCartItems([...carItems, {...product, amount: 1}])\r\n        }}\r\n\r\n        const deleteItemToCart = (product) => {\r\n            const inCart = carItems.find(\r\n                (productInCart) => productInCart.id === product.id\r\n            );\r\n            if(inCart.amount === 1){\r\n                setCartItems(\r\n                    carItems.filter(productInCart => productInCart.id !== product.id)\r\n                );\r\n            }else {\r\n            setCartItems((productInCart) => {\r\n                if(productInCart.id === product.id){\r\n                    return{...inCart, amount: inCart.amount - 1};\r\n                }else return productInCart;\r\n                });\r\n            }\r\n        };\r\n\r\n        return(\r\n            <CartContext.Provider value={{carItems, addItemToCart, deleteItemToCart}}>\r\n                {children}\r\n            </CartContext.Provider>\r\n        );\r\n    };"],"mappings":";;AAAA,SAASA,OAAO,QAAQ,wBAAwB;AAChD,SAASC,QAAQ,EAAEC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErE,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMM,YAAY,GAAGA,CAAC;EAACC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EACxC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,MAAM;IAC3C,IAAG;MACC,MAAMS,sBAAsB,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MACnE,OAAOF,sBAAsB,GAAGG,IAAI,CAACC,KAAK,CAACJ,sBAAsB,CAAC,GAAG,EAAE;IAC3E,CAAC,QAAMK,KAAK,EAAC;MACT,OAAO,EAAE;IACb;EACJ,CAAC,CAAC;EAEFf,SAAS,CAAC,MAAM;IACZW,YAAY,CAACK,OAAO,CAAC,cAAc,EAAEH,IAAI,CAACI,SAAS,CAACT,QAAQ,CAAC,CAAC;EAClE,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEd,MAAMU,aAAa,GAAIC,OAAO,IAAK;IAC/B,MAAMC,MAAM,GAAGZ,QAAQ,CAACa,IAAI,CAAEC,aAAa,IAAKA,aAAa,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CAAC;IAEhF,IAAGH,MAAM,EAAC;MACNI,YAAY,CACRhB,QAAQ,CAACiB,GAAG,CAAEH,aAAa,IAAK;QAC5B,IAAGA,aAAa,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,EAAC;UAC/B,OAAM;YAAC,GAAGH,MAAM;YAAEM,MAAM,EAAEN,MAAM,CAACM,MAAM,GAAG;UAAC,CAAC;QAChD,CAAC,MAAK,OAAOJ,aAAa;MAC9B,CAAC,CACL,CAAC;IACL,CAAC,MAAK;MACFE,YAAY,CAAC,CAAC,GAAGhB,QAAQ,EAAE;QAAC,GAAGW,OAAO;QAAEO,MAAM,EAAE;MAAC,CAAC,CAAC,CAAC;IACxD;EAAC,CAAC;EAEF,MAAMC,gBAAgB,GAAIR,OAAO,IAAK;IAClC,MAAMC,MAAM,GAAGZ,QAAQ,CAACa,IAAI,CACvBC,aAAa,IAAKA,aAAa,CAACC,EAAE,KAAKJ,OAAO,CAACI,EACpD,CAAC;IACD,IAAGH,MAAM,CAACM,MAAM,KAAK,CAAC,EAAC;MACnBF,YAAY,CACRhB,QAAQ,CAACoB,MAAM,CAACN,aAAa,IAAIA,aAAa,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CACpE,CAAC;IACL,CAAC,MAAK;MACNC,YAAY,CAAEF,aAAa,IAAK;QAC5B,IAAGA,aAAa,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,EAAC;UAC/B,OAAM;YAAC,GAAGH,MAAM;YAAEM,MAAM,EAAEN,MAAM,CAACM,MAAM,GAAG;UAAC,CAAC;QAChD,CAAC,MAAK,OAAOJ,aAAa;MAC1B,CAAC,CAAC;IACN;EACJ,CAAC;EAED,oBACInB,OAAA,CAACC,WAAW,CAACyB,QAAQ;IAACC,KAAK,EAAE;MAACtB,QAAQ;MAAEU,aAAa;MAAES;IAAgB,CAAE;IAAArB,QAAA,EACpEA;EAAQ;IAAAyB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B,CAAC;AAAC3B,EAAA,CAnDOF,YAAY;AAAA8B,EAAA,GAAZ9B,YAAY;AAAA,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}